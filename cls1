#!/usr/bin/env python3

"""This is the main script for Conservation law problems in one space dimension.

For setting up parameters use the file `defauls.py` or options via command prompt.
More information are available with "cls1 --help".

"""

import profiler
from command import PARSER_COMMANDS

from parser import CustomArgumentParser


def print_arguments(arguments):
    if arguments.args:
        print(arguments)

    del arguments.args


def print_profile(arguments):
    if "profile" in arguments:
        profiler.PRINT_PROFILE = arguments.profile
        del arguments.profile


def execute_command(arguments):
    command = arguments.command
    del arguments.command

    command(**vars(arguments)).execute()


@profiler.profile
def main():
    parser = CustomArgumentParser(PARSER_COMMANDS)
    arguments = parser.parse_arguments()

    print_arguments(arguments)
    print_profile(arguments)
    execute_command(arguments)


if __name__ == "__main__":
    main()
