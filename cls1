#!/usr/bin/env python3

"""This is the main script for PDE problems in one space dimension.

For setting up parameters use the file `defauls.py` or options via command prompt.
More information are available with "cls1 --help".

"""

from parser import ArgumentParserFEM1D

import profiler
from command import TestCommand, HelpCommand, PlotCommand, EOCCommand


@profiler.profile
def main():
    parser = ArgumentParserFEM1D()
    args = parser.parse_args()

    if hasattr(args, "profile"):
        profiler.PRINT_PROFILE = args.profile

    if args.program == "test":
        command = TestCommand(args)
    elif args.program == "help":
        command = HelpCommand(args)
    elif args.plot:
        command = PlotCommand(args)
    elif hasattr(args, "eoc") and args.eoc:
        command = EOCCommand(args)
    else:
        raise ValueError("no action specified")

    command.execute()


if __name__ == "__main__":
    main()
